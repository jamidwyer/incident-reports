<?php

/**
 * @file
 * Incident Translate module file.
 */

/**
 * Implements hook_form_BASE_FORM_ID_alter().
 */
function incident_translate_form_node_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
  // Google Translate UI removed.
}

/**
 * Implements hook_form_node_incident_form_alter().
 */
function incident_translate_form_node_incident_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
  // Google Translate UI removed.
}

/**
 * Implements hook_form_node_incident_edit_form_alter().
 */
function incident_translate_form_node_incident_edit_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
  // Google Translate UI removed.
}

/**
 * Submit handler for incident node form to process translations.
 */
function incident_translate_node_form_submit($form, \Drupal\Core\Form\FormStateInterface $form_state) {
  $node = $form_state->getFormObject()->getEntity();
  if ($node->bundle() == 'incident') {
    // Process any stored translations from localStorage.
    // This would be called when the form is submitted, but translations
    // are typically handled through the content translation interface.
    // For now, we'll just log that translations are available.
    $translations = json_decode($_POST['incident_translations'] ?? '{}', TRUE);
    if (!empty($translations)) {
      \Drupal::logger('incident_translate')->notice('Translations available for node @nid: @translations', [
        '@nid' => $node->id(),
        '@translations' => json_encode($translations),
      ]);
    }
  }
}
